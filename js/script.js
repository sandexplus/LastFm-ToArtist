// show links and style them

const artistLinks = document.createElement('div.music-links'),
    artistLinksAppend = `
        <div class="grid-container">
            <div class="grid-item">
                <a href="#" class="link" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><linearGradient id="tS~Tu1dsT5kMXF2Lct~HUa" x1="24.001" x2="24.001" y1="-4.765" y2="56.31" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#4caf50"/><stop offset=".489" stop-color="#4aaf50"/><stop offset=".665" stop-color="#43ad50"/><stop offset=".79" stop-color="#38aa50"/><stop offset=".892" stop-color="#27a550"/><stop offset=".978" stop-color="#11a050"/><stop offset="1" stop-color="#0a9e50"/></linearGradient><path fill="url(#tS~Tu1dsT5kMXF2Lct~HUa)" d="M24.001,4c-11.077,0-20,8.923-20,20s8.923,20,20,20c11.076,0,20-8.923,20-20	S35.077,4,24.001,4z"/><path d="M21.224,15.938c5.554,0,11.4,1.17,15.785,3.654c0.584,0.293,1.022,0.877,1.022,1.754 c-0.145,1.023-0.877,1.755-1.899,1.755c-0.438,0-0.585-0.146-1.023-0.291c-3.508-2.047-8.769-3.217-13.885-3.217 c-2.631,0-5.262,0.293-7.6,0.877c-0.293,0-0.585,0.146-1.023,0.146c-0.075,0.011-0.149,0.016-0.221,0.016 c-0.905,0-1.533-0.821-1.533-1.77c0-1.023,0.585-1.607,1.315-1.754C14.939,16.231,17.862,15.938,21.224,15.938 M20.785,22.369 c4.97,0,9.793,1.17,13.593,3.507c0.584,0.291,0.877,0.877,0.877,1.461c0,0.878-0.585,1.608-1.462,1.608 c-0.438,0-0.73-0.144-1.023-0.291c-3.068-1.9-7.308-3.071-12.13-3.071c-2.339,0-4.531,0.293-6.139,0.733 c-0.439,0.144-0.585,0.144-0.877,0.144c-0.877,0-1.462-0.73-1.462-1.461c0-0.877,0.439-1.316,1.169-1.607 C15.523,22.808,17.716,22.369,20.785,22.369 M21.223,28.654c4.093,0,7.893,1.021,11.108,2.924 c0.438,0.291,0.731,0.584,0.731,1.314c-0.146,0.586-0.731,1.023-1.315,1.023c-0.292,0-0.585-0.145-0.877-0.292 c-2.777-1.607-6.139-2.484-9.792-2.484c-2.047,0-4.093,0.291-5.993,0.73c-0.292,0-0.731,0.146-0.877,0.146 c-0.731,0-1.169-0.586-1.169-1.17c0-0.73,0.438-1.17,1.023-1.314C16.4,28.945,18.739,28.654,21.223,28.654 M21.224,14.938 c-3.789,0-6.666,0.371-9.317,1.202c-1.254,0.279-2.06,1.341-2.06,2.722c0,1.553,1.112,2.77,2.533,2.77 c0.095,0,0.192-0.005,0.291-0.017c0.319-0.007,0.574-0.065,0.764-0.107c0.068-0.015,0.13-0.035,0.193-0.038h0.123l0.116-0.03 c2.219-0.554,4.763-0.847,7.358-0.847c5.073,0,10.075,1.152,13.381,3.081l0.09,0.053l0.099,0.033 c0.109,0.036,0.195,0.073,0.273,0.105c0.251,0.105,0.563,0.236,1.065,0.236c1.483,0,2.671-1.075,2.889-2.615l0.01-0.07v-0.071 c0-1.171-0.564-2.13-1.549-2.635C33.238,16.313,27.314,14.938,21.224,14.938L21.224,14.938z M20.785,21.369 c-3.291,0-5.651,0.508-7.711,1.057l-0.058,0.015l-0.055,0.022c-1.194,0.476-1.799,1.329-1.799,2.536 c0,1.357,1.104,2.461,2.462,2.461c0.371,0,0.626-0.009,1.189-0.194c1.572-0.429,3.714-0.683,5.827-0.683 c4.441,0,8.562,1.037,11.603,2.921l0.038,0.024l0.04,0.02c0.334,0.168,0.792,0.397,1.471,0.397c1.404,0,2.462-1.121,2.462-2.608 c0-0.996-0.53-1.886-1.387-2.334C31.04,22.659,26.04,21.369,20.785,21.369L20.785,21.369z M21.223,27.654 c-2.547,0-4.969,0.297-7.404,0.907c-1.096,0.27-1.78,1.145-1.78,2.284c0,1.217,0.953,2.17,2.169,2.17 c0.172,0,0.334-0.037,0.522-0.079c0.101-0.023,0.288-0.065,0.357-0.067l0.101-0.003l0.122-0.023 c2.023-0.467,3.963-0.704,5.768-0.704c3.422,0,6.635,0.812,9.291,2.35l0.025,0.015l0.026,0.013 c0.334,0.168,0.792,0.399,1.327,0.399c1.05,0,2.032-0.766,2.285-1.781l0.03-0.119v-0.123c0-1.202-0.595-1.76-1.178-2.147 l-0.022-0.014l-0.022-0.013C29.455,28.713,25.437,27.654,21.223,27.654L21.223,27.654z" opacity=".05"/><path d="M21.224,15.938c5.554,0,11.4,1.17,15.785,3.654c0.584,0.293,1.022,0.877,1.022,1.754 c-0.145,1.023-0.877,1.755-1.899,1.755c-0.438,0-0.585-0.146-1.023-0.291c-3.508-2.047-8.769-3.217-13.885-3.217 c-2.631,0-5.262,0.293-7.6,0.877c-0.293,0-0.585,0.146-1.023,0.146c-0.075,0.011-0.149,0.016-0.221,0.016 c-0.905,0-1.533-0.821-1.533-1.77c0-1.023,0.585-1.607,1.315-1.754C14.939,16.231,17.862,15.938,21.224,15.938 M20.785,22.369 c4.97,0,9.793,1.17,13.593,3.507c0.584,0.291,0.877,0.877,0.877,1.461c0,0.878-0.585,1.608-1.462,1.608 c-0.438,0-0.73-0.144-1.023-0.291c-3.068-1.9-7.308-3.071-12.13-3.071c-2.339,0-4.531,0.293-6.139,0.733 c-0.439,0.144-0.585,0.144-0.877,0.144c-0.877,0-1.462-0.73-1.462-1.461c0-0.877,0.439-1.316,1.169-1.607 C15.523,22.808,17.716,22.369,20.785,22.369 M21.223,28.654c4.093,0,7.893,1.021,11.108,2.924 c0.438,0.291,0.731,0.584,0.731,1.314c-0.146,0.586-0.731,1.023-1.315,1.023c-0.292,0-0.585-0.145-0.877-0.292 c-2.777-1.607-6.139-2.484-9.792-2.484c-2.047,0-4.093,0.291-5.993,0.73c-0.292,0-0.731,0.146-0.877,0.146 c-0.731,0-1.169-0.586-1.169-1.17c0-0.73,0.438-1.17,1.023-1.314C16.4,28.945,18.739,28.654,21.223,28.654 M21.224,15.438 c-3.747,0-6.582,0.366-9.188,1.186c-1.042,0.222-1.689,1.078-1.689,2.238c0,1.273,0.893,2.27,2.033,2.27 c0.084,0,0.169-0.005,0.257-0.016c0.28-0.004,0.506-0.055,0.689-0.096c0.119-0.027,0.222-0.05,0.299-0.05h0.061l0.06-0.015 c2.258-0.564,4.844-0.862,7.479-0.862c5.158,0,10.254,1.177,13.633,3.149l0.045,0.026l0.05,0.016 c0.123,0.041,0.221,0.082,0.309,0.119c0.231,0.097,0.47,0.197,0.871,0.197c1.247,0,2.209-0.878,2.394-2.185l0.005-0.035v-0.035 c0-0.985-0.473-1.787-1.298-2.201C33.083,16.794,27.24,15.438,21.224,15.438L21.224,15.438z M20.785,21.869 c-3.054,0-5.24,0.416-7.583,1.04l-0.029,0.008l-0.028,0.011c-0.637,0.254-1.484,0.745-1.484,2.071c0,0.943,0.75,1.961,1.962,1.961 c0.34,0,0.541-0.008,1.033-0.169c1.637-0.447,3.827-0.708,5.983-0.708c4.533,0,8.747,1.064,11.867,2.996 c0.345,0.175,0.725,0.366,1.286,0.366c1.119,0,1.962-0.906,1.962-2.108c0-0.823-0.442-1.554-1.154-1.909 C30.885,23.141,25.965,21.869,20.785,21.869L20.785,21.869z M21.223,28.154c-2.506,0-4.888,0.292-7.283,0.892 c-0.864,0.213-1.401,0.902-1.401,1.799c0,0.821,0.624,1.67,1.669,1.67c0.116,0,0.246-0.029,0.411-0.067 c0.148-0.033,0.351-0.079,0.466-0.079h0.057l0.056-0.013c2.06-0.476,4.038-0.717,5.88-0.717c3.51,0,6.809,0.836,9.542,2.417 c0.331,0.168,0.712,0.359,1.127,0.359c0.827,0,1.601-0.603,1.8-1.402l0.015-0.06v-0.061c0-1.012-0.493-1.424-0.954-1.73 C29.277,29.189,25.348,28.154,21.223,28.154L21.223,28.154z" opacity=".07"/><path fill="#fff" d="M31.747,33.915c-0.292,0-0.585-0.145-0.877-0.292c-2.777-1.607-6.139-2.484-9.792-2.484 c-2.047,0-4.093,0.291-5.993,0.73c-0.292,0-0.731,0.146-0.877,0.146c-0.731,0-1.169-0.586-1.169-1.17 c0-0.73,0.438-1.17,1.023-1.314c2.338-0.586,4.677-0.877,7.161-0.877c4.093,0,7.893,1.021,11.108,2.924 c0.438,0.291,0.731,0.584,0.731,1.314C32.916,33.478,32.331,33.915,31.747,33.915z M33.793,28.945c-0.438,0-0.73-0.144-1.023-0.291 c-3.068-1.9-7.308-3.071-12.13-3.071c-2.339,0-4.531,0.293-6.139,0.733c-0.439,0.144-0.585,0.144-0.877,0.144 c-0.877,0-1.462-0.73-1.462-1.461c0-0.877,0.439-1.316,1.169-1.607c2.192-0.584,4.385-1.023,7.454-1.023 c4.97,0,9.793,1.17,13.593,3.507c0.584,0.291,0.877,0.877,0.877,1.461C35.255,28.215,34.67,28.945,33.793,28.945z M36.132,23.101 c-0.438,0-0.585-0.146-1.023-0.291c-3.508-2.047-8.769-3.217-13.885-3.217c-2.631,0-5.262,0.293-7.6,0.877 c-0.293,0-0.585,0.146-1.023,0.146c-1.023,0.146-1.754-0.73-1.754-1.754c0-1.023,0.585-1.607,1.315-1.754 c2.777-0.877,5.7-1.17,9.062-1.17c5.554,0,11.4,1.17,15.785,3.654c0.584,0.293,1.022,0.877,1.022,1.754 C37.886,22.369,37.154,23.101,36.132,23.101z"/></svg>
                    <div class="link-name">Spotify</div>
                </a>
            </div>
            <div class="grid-item">
                <a href="#" class="link" target="_blank">
                    <svg width="165" height="165" viewBox="0 0 165 165" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M33.9834 16.8654C46.1223 7.87059 60.4694 2.43314 75.4224 1.08203V25.8256C65.7566 27.0787 56.5254 30.7794 48.6291 36.6305C38.7418 43.9569 31.4707 54.2669 27.8885 66.0399C24.3062 77.8129 24.6024 90.4254 28.7333 102.017C32.8642 113.609 40.6111 123.567 50.8315 130.421C61.0518 137.275 73.2043 140.663 85.4967 140.086C97.789 139.508 109.57 134.995 119.103 127.213C128.635 119.43 135.414 108.79 138.44 96.8622C140.551 88.542 140.757 79.9024 139.104 71.5733L159.882 54.8691L159.868 54.7344C165.477 70.1632 166.334 86.9485 162.285 102.911C157.962 119.951 148.278 135.151 134.66 146.269C121.042 157.386 104.212 163.833 86.6513 164.658C69.0909 165.483 51.7301 160.643 37.1296 150.851C22.5292 141.06 11.4621 126.835 5.56083 110.275C-0.340466 93.7153 -0.763563 75.6974 4.35394 58.8789C9.47145 42.0603 19.8586 27.3317 33.9834 16.8654Z" fill="#FCCA00"/>
                    <path d="M144.215 28.4141L144.302 28.6321L130.417 50.6853C125.367 43.2026 118.601 36.9743 110.682 32.5658V82.7519C110.682 98.1496 98.1999 110.632 82.8023 110.632C67.4046 110.632 54.9224 98.1496 54.9224 82.7519C54.9224 67.3543 67.4046 54.872 82.8023 54.872C88.5729 54.872 93.9341 56.6253 98.3822 59.6281V2.23047C116.483 5.71201 132.466 15.1453 144.215 28.4141Z" fill="#FC3F1D"/>
                    </svg>
                    <div class="link-name">Yandex Music</div>
                </a>
            </div>
            <div class="grid-item">
                <a href="#" class="link" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 48 48" width="48px" height="48px"><path fill="#ff3d00" d="M2 34H10V36H2zM2 31H10V33H2zM2 28H10V30H2z"/><path fill="#ff9e80" d="M2 25H10V27H2zM2 22H10V24H2z"/><path fill="#e6ee9c" d="M29 25H37V27H29zM29 22H37V24H29z"/><path fill="#f8bbd0" d="M20 25H28V27H20zM20 22H28V24H20zM20 19H28V21H20zM20 16H28V18H20z"/><path fill="#ffeb3b" d="M11 34H19V36H11zM11 31H19V33H11zM11 28H19V30H11z"/><path fill="#ff4081" d="M20 34H28V36H20zM20 31H28V33H20zM20 28H28V30H20z"/><path fill="#cddc39" d="M29 34H37V36H29zM29 31H37V33H29zM29 28H37V30H29z"/><path fill="#4fc3f7" d="M38 34H46V36H38zM38 31H46V33H38zM38 28H46V30H38z"/><path fill="#b3e5fc" d="M38 25H46V27H38zM38 22H46V24H38zM38 19H46V21H38zM38 16H46V18H38zM38 13H46V15H38z"/></svg>
                    <div class="link-name">Deezer</div>
                </a>
            </div>
            <div class="grid-item">
                <a href="#" class="link" target="_blank">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 50 50" width="50px" height="50px">
                    <g id="surface9949420">
                    <path style=" stroke:none;fill-rule:nonzero;fill:rgb(100%,27.058825%,41.568628%);fill-opacity:1;" d="M 37 4 L 13 4 C 8.039062 4 4 8.035156 4 13 L 4 37 C 4 41.964844 8.039062 46 13 46 L 37 46 C 41.960938 46 46 41.964844 46 37 L 46 13 C 46 8.035156 41.960938 4 37 4 Z M 35 27 L 35 31.019531 L 34.996094 31.019531 C 34.984375 33.769531 32.75 36 30 36 L 29.5 36 C 28.511719 36 27.566406 35.578125 26.902344 34.847656 C 26.242188 34.117188 25.917969 33.128906 26.015625 32.144531 C 26.195312 30.378906 27.785156 29 29.644531 29 L 31 29 C 32.101562 29 33 28.101562 33 27 L 33 17.203125 L 21 19.453125 L 21 34 C 21 36.757812 18.757812 39 16 39 L 15.5 39 C 14.511719 39 13.566406 38.578125 12.902344 37.847656 C 12.242188 37.117188 11.917969 36.128906 12.015625 35.144531 C 12.195312 33.378906 13.785156 32 15.644531 32 L 17 32 C 18.101562 32 19 31.101562 19 30 L 19 15.351562 C 19 14.390625 19.6875 13.5625 20.632812 13.386719 L 33.222656 11.027344 C 33.664062 10.945312 34.113281 11.058594 34.457031 11.347656 C 34.804688 11.632812 35 12.054688 35 12.5 Z M 35 27 "/>
                    </g>
                    </svg>
                    <div class="link-name">Apple Music</div>
                </a>
            </div>
        </div>
    `;

artistLinks.innerHTML = artistLinksAppend;
const insertedBlock = document.querySelector('.header-new-title');
insertedBlock.before(artistLinks);

const gc = document.querySelector('.grid-container'),
    gi = document.querySelectorAll('.grid-item'),
    gl = document.querySelectorAll('.link'),
    svg = document.querySelectorAll('svg');

gc.style.cssText = `
        display: grid;
        grid-template-columns: repeat(3, 100px);
        grid-template-rows: repeat(1, 1fr);
        grid-auto-rows: 1fr;
        align-items: center;
        row-gap: 20px;
        margin-top: 30px;
        margin-bottom: 30px;
`;

gi.forEach(item => {
    item.style.cssText = `
    text-align: center;
`;
});

gl.forEach(item => {
    item.style.cssText = `
    text-decoration: none;
    color: #fff;
`;
});

svg.forEach(item => {
    item.style.cssText = `
    width: 50px;
    height: 50px;
`;
});

// brain of links

const reglink = /\/music\/.+/gi;
let link = decodeURI(window.location.href);

let names = link.match(reglink)[0].slice(7).split('/');
let linkOfSong = '';

alert(names);

names.forEach((item, i) => {
    names[i] = item.replace("+", '%20');
});

if (names.length === 1) {
    //spotify
    linkOfSong = `https://open.spotify.com/search/${names[0]}/artists`;
    gl[0].setAttribute("href", linkOfSong);

    //yandex music
    linkOfSong = `https://music.yandex.ru/search?text=${names[0]}&type=artists`;
    gl[1].setAttribute("href", linkOfSong);

    //deezer
    linkOfSong = `https://www.deezer.com/search/${names[0]}/artist`;
    gl[2].setAttribute("href", linkOfSong);

    //apple music
    linkOfSong = `https://beta.music.apple.com/ru/search?term=${names[0]}`;
    gl[3].setAttribute("href", linkOfSong);

} else if (names.length === 2) {
    //spotify
    linkOfSong = `https://open.spotify.com/search/${names[0]}%20${names[1]}/albums`;
    gl[0].setAttribute("href", linkOfSong);

    //yandex music
    linkOfSong = `https://music.yandex.ru/search?text=${names[0]}%20${names[1]}&type=albums`;
    gl[1].setAttribute("href", linkOfSong);

    //deezer
    linkOfSong = `https://www.deezer.com/search/${names[0]}%20${names[1]}/album`;
    gl[2].setAttribute("href", linkOfSong);

    //apple music
    linkOfSong = `https://beta.music.apple.com/ru/search?term=${names[0]}%20${names[1]}`;
    gl[3].setAttribute("href", linkOfSong);

} else if (names.length === 3) {
    //spotify
    linkOfSong = `https://open.spotify.com/search/${names[0]}%20${names[2]}/tracks`;
    gl[0].setAttribute("href", linkOfSong);

    //yandex music
    linkOfSong = `https://music.yandex.ru/search?text=${names[0]}%20${names[2]}&type=tracks`;
    gl[1].setAttribute("href", linkOfSong);

    //deezer
    linkOfSong = `https://www.deezer.com/search/${names[2]}/track`;
    gl[2].setAttribute("href", linkOfSong);

    //apple music
    linkOfSong = `https://beta.music.apple.com/ru/search?term=${names[2]}`;
    gl[3].setAttribute("href", linkOfSong);

}